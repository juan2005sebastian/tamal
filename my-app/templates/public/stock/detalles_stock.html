{% extends 'public/base_cpanel.html' %}

{% block title %}Crud con Python üêç | Detalles de Stock{% endblock %}

{% block body %}

{% if stock %}
<div class="card" style="border-radius: 10px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);">
  <div class="row justify-content-center mb-2">
    <div class="col-md-12">
      <h3 class="text-center mt-5 mb-4" style="color: #2c3e50; font-weight: bold;">
        <a href="/lista-de-stock" style="color: #2c3e50; text-decoration: none;">
          <i class="bi bi-arrow-left-circle"></i>
        </a>
        DETALLES DEL STOCK
      </h3>
      <hr style="border-top: 2px solid #2c3e50;" />
    </div>
  </div>

  <div class="row justify-content-center mb-4">
    <div class="col-md-10">
      <div class="card-body">
        <div class="card mb-4" style="border: none; background-color: #f8f9fa;">
          <div class="card-header" style="background-color: #2c3e50; color: white; font-weight: bold;">
            Detalles del Stock
          </div>
          <div class="card-body">
            <div class="row">
              <div class="col-md-6 mb-3">
                <label class="form-label" style="font-weight: bold;">ID del Stock</label>
                <p>{{ stock.id }}</p>
              </div>
              <div class="col-md-6 mb-3">
                <label class="form-label" style="font-weight: bold;">Cantidad Disponible</label>
                <p>{{ stock.cantidad_disponible }}</p>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6 mb-3">
                <label class="form-label" style="font-weight: bold;">Fecha de Registro</label>
                <p>{{ stock.fecha_registro }}</p>
              </div>
              <div class="col-md-6 mb-3">
                <label class="form-label" style="font-weight: bold;">Producto</label>
                <p>{{ stock.producto_nombre }} (ID: {{ stock.producto_id }})</p>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6 mb-3">
                <label class="form-label" style="font-weight: bold;">Usuario</label>
                <p>{{ stock.usuario_nombre }} (ID: {{ stock.users_id }})</p>
              </div>
            </div>
          </div>
        </div>
        <div class="text-center mt-4">
          <button id="btnDescargarPDF" class="btn btn-danger">
            <i class="bi bi-file-earmark-pdf"></i> Descargar PDF
          </button>
          <button id="btnDescargarImagen" class="btn btn-success">
            <i class="bi bi-image"></i> Descargar Imagen
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
{% else %}
<h2 class="text-center" style="color: #e74c3c; font-weight: bold;">
  No existe el Stock o el Pedido asociado üò≠
  <hr style="border-top: 2px solid #e74c3c;" />
</h2>
{% endif %}

<script>
  document.getElementById('btnDescargarPDF').addEventListener('click', function () {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    
    doc.setFont("helvetica", "bold");
    doc.setFontSize(18);
    doc.text("Detalles del Stock", 105, 20, null, null, "center");
    doc.setFontSize(12);
    doc.text("Informaci√≥n detallada del stock", 105, 30, null, null, "center");
    
    const stockContent = document.querySelector('.card-body').innerText;
    doc.setFont("helvetica", "normal");
    doc.setFontSize(10);
    doc.text(stockContent, 10, 50);
    
    doc.setFontSize(10);
    doc.text("Gracias por usar nuestro sistema!", 105, 280, null, null, "center");
    
    doc.save('detalles_stock.pdf');
  });
</script>

{% endblock %}